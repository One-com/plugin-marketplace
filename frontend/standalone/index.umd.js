(function(x,z){typeof exports=="object"&&typeof module<"u"?module.exports=z(require("react")):typeof define=="function"&&define.amd?define(["react"],z):(x=typeof globalThis<"u"?globalThis:x||self,x.MarketplaceApp=z(x.React))})(this,function(x){"use strict";var z={exports:{}},Q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Re;function rt(){if(Re)return Q;Re=1;var r=x,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,m=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function A(s,h,y){var g,w={},N=null,k=null;y!==void 0&&(N=""+y),h.key!==void 0&&(N=""+h.key),h.ref!==void 0&&(k=h.ref);for(g in h)i.call(h,g)&&!c.hasOwnProperty(g)&&(w[g]=h[g]);if(s&&s.defaultProps)for(g in h=s.defaultProps,h)w[g]===void 0&&(w[g]=h[g]);return{$$typeof:t,type:s,key:N,ref:k,props:w,_owner:m.current}}return Q.Fragment=n,Q.jsx=A,Q.jsxs=A,Q}var q={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var je;function at(){return je||(je=1,process.env.NODE_ENV!=="production"&&function(){var r=x,t=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),s=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),L=Symbol.iterator,D="@@iterator";function _(e){if(e===null||typeof e!="object")return null;var a=L&&e[L]||e[D];return typeof a=="function"?a:null}var p=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function f(e){{for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];T("error",e,o)}}function T(e,a,o){{var l=p.ReactDebugCurrentFrame,v=l.getStackAddendum();v!==""&&(a+="%s",o=o.concat([v]));var b=o.map(function(d){return String(d)});b.unshift("Warning: "+a),Function.prototype.apply.call(console[e],console,b)}}var $=!1,ee=!1,G=!1,V=!1,R=!1,O;O=Symbol.for("react.module.reference");function F(e){return!!(typeof e=="string"||typeof e=="function"||e===i||e===c||R||e===m||e===y||e===g||V||e===k||$||ee||G||typeof e=="object"&&e!==null&&(e.$$typeof===N||e.$$typeof===w||e.$$typeof===A||e.$$typeof===s||e.$$typeof===h||e.$$typeof===O||e.getModuleId!==void 0))}function I(e,a,o){var l=e.displayName;if(l)return l;var v=a.displayName||a.name||"";return v!==""?o+"("+v+")":o}function Pe(e){return e.displayName||"Context"}function H(e){if(e==null)return null;if(typeof e.tag=="number"&&f("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case i:return"Fragment";case n:return"Portal";case c:return"Profiler";case m:return"StrictMode";case y:return"Suspense";case g:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case s:var a=e;return Pe(a)+".Consumer";case A:var o=e;return Pe(o._context)+".Provider";case h:return I(e,e.render,"ForwardRef");case w:var l=e.displayName||null;return l!==null?l:H(e.type)||"Memo";case N:{var v=e,b=v._payload,d=v._init;try{return H(d(b))}catch{return null}}}return null}var B=Object.assign,te=0,Oe,Me,Fe,Ie,Le,De,Ge;function We(){}We.__reactDisabledLog=!0;function xt(){{if(te===0){Oe=console.log,Me=console.info,Fe=console.warn,Ie=console.error,Le=console.group,De=console.groupCollapsed,Ge=console.groupEnd;var e={configurable:!0,enumerable:!0,value:We,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}te++}}function At(){{if(te--,te===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:B({},e,{value:Oe}),info:B({},e,{value:Me}),warn:B({},e,{value:Fe}),error:B({},e,{value:Ie}),group:B({},e,{value:Le}),groupCollapsed:B({},e,{value:De}),groupEnd:B({},e,{value:Ge})})}te<0&&f("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ye=p.ReactCurrentDispatcher,Ee;function ae(e,a,o){{if(Ee===void 0)try{throw Error()}catch(v){var l=v.stack.trim().match(/\n( *(at )?)/);Ee=l&&l[1]||""}return`
`+Ee+e}}var pe=!1,ne;{var Rt=typeof WeakMap=="function"?WeakMap:Map;ne=new Rt}function Ye(e,a){if(!e||pe)return"";{var o=ne.get(e);if(o!==void 0)return o}var l;pe=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var b;b=ye.current,ye.current=null,xt();try{if(a){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(P){l=P}Reflect.construct(e,[],d)}else{try{d.call()}catch(P){l=P}e.call(d.prototype)}}else{try{throw Error()}catch(P){l=P}e()}}catch(P){if(P&&l&&typeof P.stack=="string"){for(var u=P.stack.split(`
`),S=l.stack.split(`
`),C=u.length-1,j=S.length-1;C>=1&&j>=0&&u[C]!==S[j];)j--;for(;C>=1&&j>=0;C--,j--)if(u[C]!==S[j]){if(C!==1||j!==1)do if(C--,j--,j<0||u[C]!==S[j]){var M=`
`+u[C].replace(" at new "," at ");return e.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",e.displayName)),typeof e=="function"&&ne.set(e,M),M}while(C>=1&&j>=0);break}}}finally{pe=!1,ye.current=b,At(),Error.prepareStackTrace=v}var Z=e?e.displayName||e.name:"",K=Z?ae(Z):"";return typeof e=="function"&&ne.set(e,K),K}function jt(e,a,o){return Ye(e,!1)}function kt(e){var a=e.prototype;return!!(a&&a.isReactComponent)}function se(e,a,o){if(e==null)return"";if(typeof e=="function")return Ye(e,kt(e));if(typeof e=="string")return ae(e);switch(e){case y:return ae("Suspense");case g:return ae("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case h:return jt(e.render);case w:return se(e.type,a,o);case N:{var l=e,v=l._payload,b=l._init;try{return se(b(v),a,o)}catch{}}}return""}var re=Object.prototype.hasOwnProperty,Ue={},He=p.ReactDebugCurrentFrame;function oe(e){if(e){var a=e._owner,o=se(e.type,e._source,a?a.type:null);He.setExtraStackFrame(o)}else He.setExtraStackFrame(null)}function wt(e,a,o,l,v){{var b=Function.call.bind(re);for(var d in e)if(b(e,d)){var u=void 0;try{if(typeof e[d]!="function"){var S=Error((l||"React class")+": "+o+" type `"+d+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[d]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw S.name="Invariant Violation",S}u=e[d](a,d,l,o,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(C){u=C}u&&!(u instanceof Error)&&(oe(v),f("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",l||"React class",o,d,typeof u),oe(null)),u instanceof Error&&!(u.message in Ue)&&(Ue[u.message]=!0,oe(v),f("Failed %s type: %s",o,u.message),oe(null))}}}var St=Array.isArray;function _e(e){return St(e)}function Nt(e){{var a=typeof Symbol=="function"&&Symbol.toStringTag,o=a&&e[Symbol.toStringTag]||e.constructor.name||"Object";return o}}function Pt(e){try{return ze(e),!1}catch{return!0}}function ze(e){return""+e}function Je(e){if(Pt(e))return f("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Nt(e)),ze(e)}var $e=p.ReactCurrentOwner,Ot={key:!0,ref:!0,__self:!0,__source:!0},Be,Ke;function Mt(e){if(re.call(e,"ref")){var a=Object.getOwnPropertyDescriptor(e,"ref").get;if(a&&a.isReactWarning)return!1}return e.ref!==void 0}function Ft(e){if(re.call(e,"key")){var a=Object.getOwnPropertyDescriptor(e,"key").get;if(a&&a.isReactWarning)return!1}return e.key!==void 0}function It(e,a){typeof e.ref=="string"&&$e.current}function Lt(e,a){{var o=function(){Be||(Be=!0,f("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",a))};o.isReactWarning=!0,Object.defineProperty(e,"key",{get:o,configurable:!0})}}function Dt(e,a){{var o=function(){Ke||(Ke=!0,f("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",a))};o.isReactWarning=!0,Object.defineProperty(e,"ref",{get:o,configurable:!0})}}var Gt=function(e,a,o,l,v,b,d){var u={$$typeof:t,type:e,key:a,ref:o,props:d,_owner:b};return u._store={},Object.defineProperty(u._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(u,"_self",{configurable:!1,enumerable:!1,writable:!1,value:l}),Object.defineProperty(u,"_source",{configurable:!1,enumerable:!1,writable:!1,value:v}),Object.freeze&&(Object.freeze(u.props),Object.freeze(u)),u};function Wt(e,a,o,l,v){{var b,d={},u=null,S=null;o!==void 0&&(Je(o),u=""+o),Ft(a)&&(Je(a.key),u=""+a.key),Mt(a)&&(S=a.ref,It(a,v));for(b in a)re.call(a,b)&&!Ot.hasOwnProperty(b)&&(d[b]=a[b]);if(e&&e.defaultProps){var C=e.defaultProps;for(b in C)d[b]===void 0&&(d[b]=C[b])}if(u||S){var j=typeof e=="function"?e.displayName||e.name||"Unknown":e;u&&Lt(d,j),S&&Dt(d,j)}return Gt(e,u,S,v,l,$e.current,d)}}var Te=p.ReactCurrentOwner,Ve=p.ReactDebugCurrentFrame;function X(e){if(e){var a=e._owner,o=se(e.type,e._source,a?a.type:null);Ve.setExtraStackFrame(o)}else Ve.setExtraStackFrame(null)}var Ce;Ce=!1;function xe(e){return typeof e=="object"&&e!==null&&e.$$typeof===t}function Xe(){{if(Te.current){var e=H(Te.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function Yt(e){return""}var Ze={};function Ut(e){{var a=Xe();if(!a){var o=typeof e=="string"?e:e.displayName||e.name;o&&(a=`

Check the top-level render call using <`+o+">.")}return a}}function Qe(e,a){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var o=Ut(a);if(Ze[o])return;Ze[o]=!0;var l="";e&&e._owner&&e._owner!==Te.current&&(l=" It was passed a child from "+H(e._owner.type)+"."),X(e),f('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',o,l),X(null)}}function qe(e,a){{if(typeof e!="object")return;if(_e(e))for(var o=0;o<e.length;o++){var l=e[o];xe(l)&&Qe(l,a)}else if(xe(e))e._store&&(e._store.validated=!0);else if(e){var v=_(e);if(typeof v=="function"&&v!==e.entries)for(var b=v.call(e),d;!(d=b.next()).done;)xe(d.value)&&Qe(d.value,a)}}}function Ht(e){{var a=e.type;if(a==null||typeof a=="string")return;var o;if(typeof a=="function")o=a.propTypes;else if(typeof a=="object"&&(a.$$typeof===h||a.$$typeof===w))o=a.propTypes;else return;if(o){var l=H(a);wt(o,e.props,"prop",l,e)}else if(a.PropTypes!==void 0&&!Ce){Ce=!0;var v=H(a);f("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",v||"Unknown")}typeof a.getDefaultProps=="function"&&!a.getDefaultProps.isReactClassApproved&&f("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function zt(e){{for(var a=Object.keys(e.props),o=0;o<a.length;o++){var l=a[o];if(l!=="children"&&l!=="key"){X(e),f("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",l),X(null);break}}e.ref!==null&&(X(e),f("Invalid attribute `ref` supplied to `React.Fragment`."),X(null))}}var et={};function tt(e,a,o,l,v,b){{var d=F(e);if(!d){var u="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(u+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var S=Yt();S?u+=S:u+=Xe();var C;e===null?C="null":_e(e)?C="array":e!==void 0&&e.$$typeof===t?(C="<"+(H(e.type)||"Unknown")+" />",u=" Did you accidentally export a JSX literal instead of a component?"):C=typeof e,f("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",C,u)}var j=Wt(e,a,o,v,b);if(j==null)return j;if(d){var M=a.children;if(M!==void 0)if(l)if(_e(M)){for(var Z=0;Z<M.length;Z++)qe(M[Z],e);Object.freeze&&Object.freeze(M)}else f("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else qe(M,e)}if(re.call(a,"key")){var K=H(e),P=Object.keys(a).filter(function(Xt){return Xt!=="key"}),Ae=P.length>0?"{key: someKey, "+P.join(": ..., ")+": ...}":"{key: someKey}";if(!et[K+Ae]){var Vt=P.length>0?"{"+P.join(": ..., ")+": ...}":"{}";f(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Ae,K,Vt,K),et[K+Ae]=!0}}return e===i?zt(j):Ht(j),j}}function Jt(e,a,o){return tt(e,a,o,!0)}function $t(e,a,o){return tt(e,a,o,!1)}var Bt=$t,Kt=Jt;q.Fragment=i,q.jsx=Bt,q.jsxs=Kt}()),q}process.env.NODE_ENV==="production"?z.exports=rt():z.exports=at();var E=z.exports;function nt(r){var A;const t=Array.isArray((A=r==null?void 0:r.data)==null?void 0:A.sections)?r.data.sections:Array.isArray(r==null?void 0:r.sections)?r.sections:null;if(!t)return[];const i=t.filter(s=>!s.type||s.type==="plugin").flatMap(s=>Array.isArray(s.items)?s.items:[]).filter(s=>s&&(s.slug||s.name));if(i.length===0)return[];const m=i.map(s=>{const h=typeof(s==null?void 0:s.description)=="object"&&s.description!==null?s.description["en-gb"]||Object.values(s.description)[0]||"":(s==null?void 0:s.description)||"",y=(s==null?void 0:s.download)||(s==null?void 0:s.download_url)||(s==null?void 0:s.downloadUrl)||"",g=typeof(s==null?void 0:s.author)=="object"&&s.author!==null?s.author.name||"":(s==null?void 0:s.author)||"",w=typeof(s==null?void 0:s.author)=="object"&&s.author!==null&&s.author.url||"",N=typeof(s==null?void 0:s.price)=="object"&&s.price!==null?s.price.amount:void 0,k=typeof(s==null?void 0:s.price)=="object"&&s.price!==null?s.price.currency:void 0;return{...s,name:(s==null?void 0:s.name)||"Unknown",slug:(s==null?void 0:s.slug)||"",thumbnail:(s==null?void 0:s.thumbnail)||"",description:h,download:y,author:g,authorUrl:w,priceAmount:N,priceCurrency:k,installed:(s==null?void 0:s.installed)??!1,activated:(s==null?void 0:s.activated)??!1}}),c=new Set;return m.filter(s=>{const h=s.slug||s.name||JSON.stringify(s);return c.has(h)?!1:(c.add(h),!0)})}function st({plugin:r,pluginInAction:t,onAction:n}){const i=m=>{n(m,r)};return E.jsx("div",{className:"plugin-actions gv-card-content gv-flex gv-gap-sm gv-mt-md",children:r.installed?r.activated?E.jsx("button",{className:"gv-button gv-button-secondary",disabled:t[r.slug],onClick:()=>i("deactivate"),children:t[r.slug]?marketplaceConfig.labels.deactivating:marketplaceConfig.labels.deactivate}):E.jsx("button",{className:"gv-button gv-button-primary",disabled:t[r.slug],onClick:()=>i("activate"),children:t[r.slug]?marketplaceConfig.labels.activating:marketplaceConfig.labels.activate}):E.jsx("button",{className:"gv-button gv-button-secondary",disabled:t[r.slug],onClick:()=>i("install"),children:t[r.slug]?marketplaceConfig.labels.installing:marketplaceConfig.labels.install})})}var ot=Object.defineProperty,it=(r,t,n)=>t in r?ot(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,W=(r,t,n)=>(it(r,t+"",n),n);const ie={};async function Y(r){if(ie.hasOwnProperty(r))return ie[r];let t;return r.startsWith("data:")||!("caches"in self)?t=fetch(r).then(n=>n.text()):t=caches.open("gravity").then(async n=>{let i=await n.match(r);return i||(i=await fetch(r),i.ok&&await n.put(r,i.clone())),i.text()}),ie[r]=t,t}class ce extends HTMLElement{static get observedAttributes(){return["src"]}fetchFlag(t){t&&Y(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchFlag(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchFlag(i)}}W(ce,"TAG_NAME","gv-flag");class le extends HTMLElement{static get observedAttributes(){return["src"]}fetchIcon(t){t&&Y(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchIcon(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchIcon(i)}}W(le,"TAG_NAME","gv-icon");class fe extends HTMLElement{static get observedAttributes(){return["src"]}fetchIllustration(t){t&&Y(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchIllustration(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchIllustration(i)}}W(fe,"TAG_NAME","gv-illustration");class ue extends HTMLElement{static get observedAttributes(){return["src"]}fetchIndicator(t){t&&Y(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchIndicator(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchIndicator(i)}}W(ue,"TAG_NAME","gv-indicator");class de extends HTMLElement{static get observedAttributes(){return["src"]}fetchLoader(t){t&&Y(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchLoader(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchLoader(i)}}W(de,"TAG_NAME","gv-loader");class ve extends HTMLElement{static get observedAttributes(){return["src"]}fetchLogo(t){t&&Y(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchLogo(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchLogo(i)}}W(ve,"TAG_NAME","gv-logo");class he extends HTMLElement{static get observedAttributes(){return["src"]}fetchPayIcon(t){t&&Y(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchPayIcon(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchPayIcon(i)}}W(he,"TAG_NAME","gv-pay-icon");class me extends HTMLElement{static get observedAttributes(){return["src"]}fetchTile(t){t&&Y(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchTile(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchTile(i)}}W(me,"TAG_NAME","gv-tile");function U(r,t){customElements.get(r)||customElements.define(r,t)}U(ce.TAG_NAME,ce),U(le.TAG_NAME,le),U(fe.TAG_NAME,fe),U(ue.TAG_NAME,ue),U(de.TAG_NAME,de),U(ve.TAG_NAME,ve),U(he.TAG_NAME,he),U(me.TAG_NAME,me);const ct=(r,t,n,i)=>{var c,A,s,h;const m=[n,{code:t,...i||{}}];if((A=(c=r==null?void 0:r.services)==null?void 0:c.logger)!=null&&A.forward)return r.services.logger.forward(m,"warn","react-i18next::",!0);J(m[0])&&(m[0]=`react-i18next:: ${m[0]}`),(h=(s=r==null?void 0:r.services)==null?void 0:s.logger)!=null&&h.warn?r.services.logger.warn(...m):console!=null&&console.warn&&console.warn(...m)},ke={},ge=(r,t,n,i)=>{J(n)&&ke[n]||(J(n)&&(ke[n]=new Date),ct(r,t,n,i))},we=(r,t)=>()=>{if(r.isInitialized)t();else{const n=()=>{setTimeout(()=>{r.off("initialized",n)},0),t()};r.on("initialized",n)}},be=(r,t,n)=>{r.loadNamespaces(t,we(r,n))},Se=(r,t,n,i)=>{if(J(n)&&(n=[n]),r.options.preload&&r.options.preload.indexOf(t)>-1)return be(r,n,i);n.forEach(m=>{r.options.ns.indexOf(m)<0&&r.options.ns.push(m)}),r.loadLanguages(t,we(r,i))},lt=(r,t,n={})=>!t.languages||!t.languages.length?(ge(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(r,{lng:n.lng,precheck:(i,m)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!m(i.isLanguageChangingTo,r))return!1}}),J=r=>typeof r=="string",ft=r=>typeof r=="object"&&r!==null,ut=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,dt={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},vt=r=>dt[r];let ht={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:r=>r.replace(ut,vt)};const mt=()=>ht;let gt;const bt=()=>gt,yt=x.createContext();class Et{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const pt=(r,t)=>{const n=x.useRef();return x.useEffect(()=>{n.current=r},[r,t]),n.current},Ne=(r,t,n,i)=>r.getFixedT(t,n,i),_t=(r,t,n,i)=>x.useCallback(Ne(r,t,n,i),[r,t,n,i]),Tt=(r,t={})=>{var $,ee,G,V;const{i18n:n}=t,{i18n:i,defaultNS:m}=x.useContext(yt)||{},c=n||i||bt();if(c&&!c.reportNamespaces&&(c.reportNamespaces=new Et),!c){ge(c,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const R=(F,I)=>J(I)?I:ft(I)&&J(I.defaultValue)?I.defaultValue:Array.isArray(F)?F[F.length-1]:F,O=[R,{},!1];return O.t=R,O.i18n={},O.ready=!1,O}($=c.options.react)!=null&&$.wait&&ge(c,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const A={...mt(),...c.options.react,...t},{useSuspense:s,keyPrefix:h}=A;let y=m||((ee=c.options)==null?void 0:ee.defaultNS);y=J(y)?[y]:y||["translation"],(V=(G=c.reportNamespaces).addUsedNamespaces)==null||V.call(G,y);const g=(c.isInitialized||c.initializedStoreOnce)&&y.every(R=>lt(R,c,A)),w=_t(c,t.lng||null,A.nsMode==="fallback"?y:y[0],h),N=()=>w,k=()=>Ne(c,t.lng||null,A.nsMode==="fallback"?y:y[0],h),[L,D]=x.useState(N);let _=y.join();t.lng&&(_=`${t.lng}${_}`);const p=pt(_),f=x.useRef(!0);x.useEffect(()=>{const{bindI18n:R,bindI18nStore:O}=A;f.current=!0,!g&&!s&&(t.lng?Se(c,t.lng,y,()=>{f.current&&D(k)}):be(c,y,()=>{f.current&&D(k)})),g&&p&&p!==_&&f.current&&D(k);const F=()=>{f.current&&D(k)};return R&&(c==null||c.on(R,F)),O&&(c==null||c.store.on(O,F)),()=>{f.current=!1,c&&R&&(R==null||R.split(" ").forEach(I=>c.off(I,F))),O&&c&&O.split(" ").forEach(I=>c.store.off(I,F))}},[c,_]),x.useEffect(()=>{f.current&&g&&D(N)},[c,h,g]);const T=[L,c,g];if(T.t=L,T.i18n=c,T.ready=g,g||!g&&!s)return T;throw new Promise(R=>{t.lng?Se(c,t.lng,y,()=>R()):be(c,y,()=>R())})};function Ct({apiBaseUrl:r,useWPHandlers:t,wpConfig:n,enableDefaultStyles:i,assetsBaseUrl:m}){const[c,A]=x.useState([]),[s,h]=x.useState(!0),[y,g]=x.useState({}),{t:w}=Tt();x.useEffect(()=>{async function _(){try{const f=await(await fetch(`${r}`)).json(),T=nt(f);A(T)}catch(p){console.error("Failed to fetch plugins",p)}finally{h(!1)}}_()},[r,t,n]);const N=async(_,p)=>{var f;g(T=>({...T,[p.slug]:!0}));try{let T=`${r}/${_}/${p.slug}`;const $=`download_url=${encodeURIComponent(p.download||"")}`;t?T=`${n.ajax_url}?action=marketplace_${_}_plugin&_wpnonce=${n.nonce}&nonce=${n.nonce}&slug=${p.slug}&${$}`:T=T+(T.includes("?")?"&":"?")+$;const G=await(await fetch(T,{method:"POST"})).json();G.success?A(V=>V.map(R=>R.slug===p.slug?{...R,installed:G.data.installed,activated:G.data.activated}:R)):alert(((f=G.data)==null?void 0:f.message)||"Failed to perform action")}catch(T){console.error("Plugin action failed",T)}finally{g(T=>({...T,[p.slug]:!1}))}};if(s)return E.jsx("p",{children:"Loading plugins..."});const k=new Map,L=new Map;c.forEach(_=>{L.has(_.slug)||L.set(_.slug,_)}),Array.from(L.values()).forEach(_=>{const p=Array.isArray(_.categories)&&_.categories.length?String(_.categories[0]):"Others";k.has(p)||k.set(p,[]),k.get(p).push(_)});const D=Array.from(k.entries());return E.jsx("div",{className:"marketplace-container gv-flex gv-flex-col gv-flex-wrap gv-gap-lg gv-mt-fluid",children:D.map(([_,p])=>E.jsxs("section",{className:"",children:[E.jsx("h2",{className:"gv-heading-md gv-mb-sm",children:_}),E.jsx("div",{className:"gv-grid gv-gap-lg gv-tab-grid-cols-1 gv-desk-grid-cols-2",children:p.map(f=>E.jsxs("a",{href:"#",className:"gv-shortcut-tile gv-surface-bright",children:[E.jsx("gv-tile",{"aria-hidden":"true",src:`${m||window.marketplaceConfig&&window.marketplaceConfig.assetsBaseUrl||""}assets/icons/placeholder.svg`}),E.jsxs("div",{className:"gv-content",children:[E.jsx("h3",{className:"gv-title",children:f.name}),E.jsx("p",{children:f.description?f.description:f.shortDescription}),E.jsxs("div",{className:"gv-price",children:[E.jsx("span",{className:"gv-price-prefix",children:w("migratorMail_hi")}),E.jsxs("span",{className:"gv-price-text",children:[f.priceCurrency," ",f.priceAmount]}),E.jsx("span",{className:"gv-period",children:"/mo"})]})]}),E.jsx("gv-icon",{"aria-hidden":"true",src:`${m||window.marketplaceConfig&&window.marketplaceConfig.assetsBaseUrl||""}assets/icons/arrow_forward.svg`}),t===!0&&E.jsx(st,{plugin:f,pluginInAction:y,onAction:N})]},f.slug))})]},_))})}return({apiBaseUrl:r,useWPHandlers:t,wpConfig:n,enableDefaultStyles:i,assetsBaseUrl:m})=>E.jsxs("div",{className:"marketplace-container gv-p-lg",children:[E.jsxs("div",{className:"gv-content-container gv-p-lg gv-flex-column-md",style:{background:"#F3F4F0"},children:[E.jsx("h2",{className:"gv-heading-lg",children:"one.com WP marketplace"}),E.jsx("p",{className:"gv-text-sm",children:"Your place to find recommended and relevant plugins for your site."})]}),E.jsx(Ct,{apiBaseUrl:r,useWPHandlers:t,wpConfig:n,enableDefaultStyles:i,assetsBaseUrl:m})]})});
