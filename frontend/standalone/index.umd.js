(function(x,B){typeof exports=="object"&&typeof module<"u"?module.exports=B(require("react")):typeof define=="function"&&define.amd?define(["react"],B):(x=typeof globalThis<"u"?globalThis:x||self,x.MarketplaceApp=B(x.React))})(this,function(x){"use strict";var B={exports:{}},q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Re;function rt(){if(Re)return q;Re=1;var r=x,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,g=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function T(s,d,h){var m,j={},N=null,I=null;h!==void 0&&(N=""+h),d.key!==void 0&&(N=""+d.key),d.ref!==void 0&&(I=d.ref);for(m in d)i.call(d,m)&&!c.hasOwnProperty(m)&&(j[m]=d[m]);if(s&&s.defaultProps)for(m in d=s.defaultProps,d)j[m]===void 0&&(j[m]=d[m]);return{$$typeof:t,type:s,key:N,ref:I,props:j,_owner:g.current}}return q.Fragment=n,q.jsx=T,q.jsxs=T,q}var ee={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var we;function at(){return we||(we=1,process.env.NODE_ENV!=="production"&&function(){var r=x,t=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),s=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),$=Symbol.iterator,Y="@@iterator";function D(e){if(e===null||typeof e!="object")return null;var a=$&&e[$]||e[Y];return typeof a=="function"?a:null}var F=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function _(e){{for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];p("error",e,o)}}function p(e,a,o){{var l=F.ReactDebugCurrentFrame,v=l.getStackAddendum();v!==""&&(a+="%s",o=o.concat([v]));var E=o.map(function(u){return String(u)});E.unshift("Warning: "+a),Function.prototype.apply.call(console[e],console,E)}}var C=!1,b=!1,A=!1,W=!1,R=!1,S;S=Symbol.for("react.module.reference");function L(e){return!!(typeof e=="string"||typeof e=="function"||e===i||e===c||R||e===g||e===h||e===m||W||e===I||C||b||A||typeof e=="object"&&e!==null&&(e.$$typeof===N||e.$$typeof===j||e.$$typeof===T||e.$$typeof===s||e.$$typeof===d||e.$$typeof===S||e.getModuleId!==void 0))}function P(e,a,o){var l=e.displayName;if(l)return l;var v=a.displayName||a.name||"";return v!==""?o+"("+v+")":o}function Pe(e){return e.displayName||"Context"}function J(e){if(e==null)return null;if(typeof e.tag=="number"&&_("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case i:return"Fragment";case n:return"Portal";case c:return"Profiler";case g:return"StrictMode";case h:return"Suspense";case m:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case s:var a=e;return Pe(a)+".Consumer";case T:var o=e;return Pe(o._context)+".Provider";case d:return P(e,e.render,"ForwardRef");case j:var l=e.displayName||null;return l!==null?l:J(e.type)||"Memo";case N:{var v=e,E=v._payload,u=v._init;try{return J(u(E))}catch{return null}}}return null}var V=Object.assign,te=0,Oe,Me,Ie,Fe,Le,De,Ge;function We(){}We.__reactDisabledLog=!0;function xt(){{if(te===0){Oe=console.log,Me=console.info,Ie=console.warn,Fe=console.error,Le=console.group,De=console.groupCollapsed,Ge=console.groupEnd;var e={configurable:!0,enumerable:!0,value:We,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}te++}}function At(){{if(te--,te===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:V({},e,{value:Oe}),info:V({},e,{value:Me}),warn:V({},e,{value:Ie}),error:V({},e,{value:Fe}),group:V({},e,{value:Le}),groupCollapsed:V({},e,{value:De}),groupEnd:V({},e,{value:Ge})})}te<0&&_("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ye=F.ReactCurrentDispatcher,Ee;function ae(e,a,o){{if(Ee===void 0)try{throw Error()}catch(v){var l=v.stack.trim().match(/\n( *(at )?)/);Ee=l&&l[1]||""}return`
`+Ee+e}}var pe=!1,ne;{var Rt=typeof WeakMap=="function"?WeakMap:Map;ne=new Rt}function Ye(e,a){if(!e||pe)return"";{var o=ne.get(e);if(o!==void 0)return o}var l;pe=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var E;E=ye.current,ye.current=null,xt();try{if(a){var u=function(){throw Error()};if(Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(M){l=M}Reflect.construct(e,[],u)}else{try{u.call()}catch(M){l=M}e.call(u.prototype)}}else{try{throw Error()}catch(M){l=M}e()}}catch(M){if(M&&l&&typeof M.stack=="string"){for(var f=M.stack.split(`
`),O=l.stack.split(`
`),w=f.length-1,k=O.length-1;w>=1&&k>=0&&f[w]!==O[k];)k--;for(;w>=1&&k>=0;w--,k--)if(f[w]!==O[k]){if(w!==1||k!==1)do if(w--,k--,k<0||f[w]!==O[k]){var G=`
`+f[w].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),typeof e=="function"&&ne.set(e,G),G}while(w>=1&&k>=0);break}}}finally{pe=!1,ye.current=E,At(),Error.prepareStackTrace=v}var Q=e?e.displayName||e.name:"",X=Q?ae(Q):"";return typeof e=="function"&&ne.set(e,X),X}function wt(e,a,o){return Ye(e,!1)}function kt(e){var a=e.prototype;return!!(a&&a.isReactComponent)}function se(e,a,o){if(e==null)return"";if(typeof e=="function")return Ye(e,kt(e));if(typeof e=="string")return ae(e);switch(e){case h:return ae("Suspense");case m:return ae("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case d:return wt(e.render);case j:return se(e.type,a,o);case N:{var l=e,v=l._payload,E=l._init;try{return se(E(v),a,o)}catch{}}}return""}var re=Object.prototype.hasOwnProperty,Ue={},He=F.ReactDebugCurrentFrame;function oe(e){if(e){var a=e._owner,o=se(e.type,e._source,a?a.type:null);He.setExtraStackFrame(o)}else He.setExtraStackFrame(null)}function jt(e,a,o,l,v){{var E=Function.call.bind(re);for(var u in e)if(E(e,u)){var f=void 0;try{if(typeof e[u]!="function"){var O=Error((l||"React class")+": "+o+" type `"+u+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[u]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw O.name="Invariant Violation",O}f=e[u](a,u,l,o,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(w){f=w}f&&!(f instanceof Error)&&(oe(v),_("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",l||"React class",o,u,typeof f),oe(null)),f instanceof Error&&!(f.message in Ue)&&(Ue[f.message]=!0,oe(v),_("Failed %s type: %s",o,f.message),oe(null))}}}var St=Array.isArray;function _e(e){return St(e)}function Nt(e){{var a=typeof Symbol=="function"&&Symbol.toStringTag,o=a&&e[Symbol.toStringTag]||e.constructor.name||"Object";return o}}function Pt(e){try{return ze(e),!1}catch{return!0}}function ze(e){return""+e}function Je(e){if(Pt(e))return _("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Nt(e)),ze(e)}var Be=F.ReactCurrentOwner,Ot={key:!0,ref:!0,__self:!0,__source:!0},Ke,$e;function Mt(e){if(re.call(e,"ref")){var a=Object.getOwnPropertyDescriptor(e,"ref").get;if(a&&a.isReactWarning)return!1}return e.ref!==void 0}function It(e){if(re.call(e,"key")){var a=Object.getOwnPropertyDescriptor(e,"key").get;if(a&&a.isReactWarning)return!1}return e.key!==void 0}function Ft(e,a){typeof e.ref=="string"&&Be.current}function Lt(e,a){{var o=function(){Ke||(Ke=!0,_("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",a))};o.isReactWarning=!0,Object.defineProperty(e,"key",{get:o,configurable:!0})}}function Dt(e,a){{var o=function(){$e||($e=!0,_("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",a))};o.isReactWarning=!0,Object.defineProperty(e,"ref",{get:o,configurable:!0})}}var Gt=function(e,a,o,l,v,E,u){var f={$$typeof:t,type:e,key:a,ref:o,props:u,_owner:E};return f._store={},Object.defineProperty(f._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(f,"_self",{configurable:!1,enumerable:!1,writable:!1,value:l}),Object.defineProperty(f,"_source",{configurable:!1,enumerable:!1,writable:!1,value:v}),Object.freeze&&(Object.freeze(f.props),Object.freeze(f)),f};function Wt(e,a,o,l,v){{var E,u={},f=null,O=null;o!==void 0&&(Je(o),f=""+o),It(a)&&(Je(a.key),f=""+a.key),Mt(a)&&(O=a.ref,Ft(a,v));for(E in a)re.call(a,E)&&!Ot.hasOwnProperty(E)&&(u[E]=a[E]);if(e&&e.defaultProps){var w=e.defaultProps;for(E in w)u[E]===void 0&&(u[E]=w[E])}if(f||O){var k=typeof e=="function"?e.displayName||e.name||"Unknown":e;f&&Lt(u,k),O&&Dt(u,k)}return Gt(e,f,O,v,l,Be.current,u)}}var Te=F.ReactCurrentOwner,Ve=F.ReactDebugCurrentFrame;function Z(e){if(e){var a=e._owner,o=se(e.type,e._source,a?a.type:null);Ve.setExtraStackFrame(o)}else Ve.setExtraStackFrame(null)}var Ce;Ce=!1;function xe(e){return typeof e=="object"&&e!==null&&e.$$typeof===t}function Xe(){{if(Te.current){var e=J(Te.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function Yt(e){return""}var Ze={};function Ut(e){{var a=Xe();if(!a){var o=typeof e=="string"?e:e.displayName||e.name;o&&(a=`

Check the top-level render call using <`+o+">.")}return a}}function Qe(e,a){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var o=Ut(a);if(Ze[o])return;Ze[o]=!0;var l="";e&&e._owner&&e._owner!==Te.current&&(l=" It was passed a child from "+J(e._owner.type)+"."),Z(e),_('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',o,l),Z(null)}}function qe(e,a){{if(typeof e!="object")return;if(_e(e))for(var o=0;o<e.length;o++){var l=e[o];xe(l)&&Qe(l,a)}else if(xe(e))e._store&&(e._store.validated=!0);else if(e){var v=D(e);if(typeof v=="function"&&v!==e.entries)for(var E=v.call(e),u;!(u=E.next()).done;)xe(u.value)&&Qe(u.value,a)}}}function Ht(e){{var a=e.type;if(a==null||typeof a=="string")return;var o;if(typeof a=="function")o=a.propTypes;else if(typeof a=="object"&&(a.$$typeof===d||a.$$typeof===j))o=a.propTypes;else return;if(o){var l=J(a);jt(o,e.props,"prop",l,e)}else if(a.PropTypes!==void 0&&!Ce){Ce=!0;var v=J(a);_("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",v||"Unknown")}typeof a.getDefaultProps=="function"&&!a.getDefaultProps.isReactClassApproved&&_("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function zt(e){{for(var a=Object.keys(e.props),o=0;o<a.length;o++){var l=a[o];if(l!=="children"&&l!=="key"){Z(e),_("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",l),Z(null);break}}e.ref!==null&&(Z(e),_("Invalid attribute `ref` supplied to `React.Fragment`."),Z(null))}}var et={};function tt(e,a,o,l,v,E){{var u=L(e);if(!u){var f="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(f+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var O=Yt();O?f+=O:f+=Xe();var w;e===null?w="null":_e(e)?w="array":e!==void 0&&e.$$typeof===t?(w="<"+(J(e.type)||"Unknown")+" />",f=" Did you accidentally export a JSX literal instead of a component?"):w=typeof e,_("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",w,f)}var k=Wt(e,a,o,v,E);if(k==null)return k;if(u){var G=a.children;if(G!==void 0)if(l)if(_e(G)){for(var Q=0;Q<G.length;Q++)qe(G[Q],e);Object.freeze&&Object.freeze(G)}else _("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else qe(G,e)}if(re.call(a,"key")){var X=J(e),M=Object.keys(a).filter(function(Xt){return Xt!=="key"}),Ae=M.length>0?"{key: someKey, "+M.join(": ..., ")+": ...}":"{key: someKey}";if(!et[X+Ae]){var Vt=M.length>0?"{"+M.join(": ..., ")+": ...}":"{}";_(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Ae,X,Vt,X),et[X+Ae]=!0}}return e===i?zt(k):Ht(k),k}}function Jt(e,a,o){return tt(e,a,o,!0)}function Bt(e,a,o){return tt(e,a,o,!1)}var Kt=Bt,$t=Jt;ee.Fragment=i,ee.jsx=Kt,ee.jsxs=$t}()),ee}process.env.NODE_ENV==="production"?B.exports=rt():B.exports=at();var y=B.exports;function nt(r){var T;const t=Array.isArray((T=r==null?void 0:r.data)==null?void 0:T.sections)?r.data.sections:Array.isArray(r==null?void 0:r.sections)?r.sections:null;if(!t)return[];const i=t.filter(s=>!s.type||s.type==="plugin").flatMap(s=>Array.isArray(s.items)?s.items:[]).filter(s=>s&&(s.slug||s.name));if(i.length===0)return[];const g=i.map(s=>{const d=typeof(s==null?void 0:s.description)=="object"&&s.description!==null?s.description["en-gb"]||Object.values(s.description)[0]||"":(s==null?void 0:s.description)||"",h=(s==null?void 0:s.download)||(s==null?void 0:s.download_url)||(s==null?void 0:s.downloadUrl)||"",m=typeof(s==null?void 0:s.author)=="object"&&s.author!==null?s.author.name||"":(s==null?void 0:s.author)||"",j=typeof(s==null?void 0:s.author)=="object"&&s.author!==null&&s.author.url||"",N=typeof(s==null?void 0:s.price)=="object"&&s.price!==null?s.price.amount:void 0,I=typeof(s==null?void 0:s.price)=="object"&&s.price!==null?s.price.currency:void 0;return{...s,name:(s==null?void 0:s.name)||"Unknown",slug:(s==null?void 0:s.slug)||"",thumbnail:(s==null?void 0:s.thumbnail)||"",description:d,download:h,author:m,authorUrl:j,priceAmount:N,priceCurrency:I,installed:(s==null?void 0:s.installed)??!1,activated:(s==null?void 0:s.activated)??!1}}),c=new Set;return g.filter(s=>{const d=s.slug||s.name||JSON.stringify(s);return c.has(d)?!1:(c.add(d),!0)})}function st({plugin:r,pluginInAction:t,onAction:n}){var g,c,T,s,d,h;const i=m=>{n(m,r)};return y.jsx("div",{className:"plugin-actions gv-card-content gv-flex gv-gap-sm gv-mt-md",children:r.installed?r.activated?y.jsx("button",{className:"gv-button gv-button-secondary",disabled:t[r.slug],onClick:()=>i("deactivate"),children:t[r.slug]?((g=marketplaceConfig==null?void 0:marketplaceConfig.labels)==null?void 0:g.deactivating)||"Deactivating...":((c=marketplaceConfig==null?void 0:marketplaceConfig.labels)==null?void 0:c.deactivate)||"Deactivate"}):y.jsx("button",{className:"gv-button gv-button-primary",disabled:t[r.slug],onClick:()=>i("activate"),children:t[r.slug]?((T=marketplaceConfig==null?void 0:marketplaceConfig.labels)==null?void 0:T.activating)||"Activating...":((s=marketplaceConfig==null?void 0:marketplaceConfig.labels)==null?void 0:s.activate)||"Activate"}):y.jsx("button",{className:"gv-button gv-button-secondary",disabled:t[r.slug],onClick:()=>i("install"),children:t[r.slug]?((d=marketplaceConfig==null?void 0:marketplaceConfig.labels)==null?void 0:d.installing)||"Installing...":((h=marketplaceConfig==null?void 0:marketplaceConfig.labels)==null?void 0:h.install)||"Install"})})}var ot=Object.defineProperty,it=(r,t,n)=>t in r?ot(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,U=(r,t,n)=>(it(r,t+"",n),n);const ie={};async function H(r){if(ie.hasOwnProperty(r))return ie[r];let t;return r.startsWith("data:")||!("caches"in self)?t=fetch(r).then(n=>n.text()):t=caches.open("gravity").then(async n=>{let i=await n.match(r);return i||(i=await fetch(r),i.ok&&await n.put(r,i.clone())),i.text()}),ie[r]=t,t}class ce extends HTMLElement{static get observedAttributes(){return["src"]}fetchFlag(t){t&&H(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchFlag(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchFlag(i)}}U(ce,"TAG_NAME","gv-flag");class le extends HTMLElement{static get observedAttributes(){return["src"]}fetchIcon(t){t&&H(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchIcon(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchIcon(i)}}U(le,"TAG_NAME","gv-icon");class fe extends HTMLElement{static get observedAttributes(){return["src"]}fetchIllustration(t){t&&H(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchIllustration(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchIllustration(i)}}U(fe,"TAG_NAME","gv-illustration");class ue extends HTMLElement{static get observedAttributes(){return["src"]}fetchIndicator(t){t&&H(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchIndicator(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchIndicator(i)}}U(ue,"TAG_NAME","gv-indicator");class de extends HTMLElement{static get observedAttributes(){return["src"]}fetchLoader(t){t&&H(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchLoader(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchLoader(i)}}U(de,"TAG_NAME","gv-loader");class ve extends HTMLElement{static get observedAttributes(){return["src"]}fetchLogo(t){t&&H(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchLogo(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchLogo(i)}}U(ve,"TAG_NAME","gv-logo");class he extends HTMLElement{static get observedAttributes(){return["src"]}fetchPayIcon(t){t&&H(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchPayIcon(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchPayIcon(i)}}U(he,"TAG_NAME","gv-pay-icon");class me extends HTMLElement{static get observedAttributes(){return["src"]}fetchTile(t){t&&H(t).then(n=>this.innerHTML=n)}connectedCallback(){this.fetchTile(this.getAttribute("src"))}attributeChangedCallback(t,n,i){t==="src"&&n!==i&&this.fetchTile(i)}}U(me,"TAG_NAME","gv-tile");function z(r,t){customElements.get(r)||customElements.define(r,t)}z(ce.TAG_NAME,ce),z(le.TAG_NAME,le),z(fe.TAG_NAME,fe),z(ue.TAG_NAME,ue),z(de.TAG_NAME,de),z(ve.TAG_NAME,ve),z(he.TAG_NAME,he),z(me.TAG_NAME,me);const ct=(r,t,n,i)=>{var c,T,s,d;const g=[n,{code:t,...i||{}}];if((T=(c=r==null?void 0:r.services)==null?void 0:c.logger)!=null&&T.forward)return r.services.logger.forward(g,"warn","react-i18next::",!0);K(g[0])&&(g[0]=`react-i18next:: ${g[0]}`),(d=(s=r==null?void 0:r.services)==null?void 0:s.logger)!=null&&d.warn?r.services.logger.warn(...g):console!=null&&console.warn&&console.warn(...g)},ke={},ge=(r,t,n,i)=>{K(n)&&ke[n]||(K(n)&&(ke[n]=new Date),ct(r,t,n,i))},je=(r,t)=>()=>{if(r.isInitialized)t();else{const n=()=>{setTimeout(()=>{r.off("initialized",n)},0),t()};r.on("initialized",n)}},be=(r,t,n)=>{r.loadNamespaces(t,je(r,n))},Se=(r,t,n,i)=>{if(K(n)&&(n=[n]),r.options.preload&&r.options.preload.indexOf(t)>-1)return be(r,n,i);n.forEach(g=>{r.options.ns.indexOf(g)<0&&r.options.ns.push(g)}),r.loadLanguages(t,je(r,i))},lt=(r,t,n={})=>!t.languages||!t.languages.length?(ge(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(r,{lng:n.lng,precheck:(i,g)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!g(i.isLanguageChangingTo,r))return!1}}),K=r=>typeof r=="string",ft=r=>typeof r=="object"&&r!==null,ut=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,dt={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},vt=r=>dt[r];let ht={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:r=>r.replace(ut,vt)};const mt=()=>ht;let gt;const bt=()=>gt,yt=x.createContext();class Et{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const pt=(r,t)=>{const n=x.useRef();return x.useEffect(()=>{n.current=r},[r,t]),n.current},Ne=(r,t,n,i)=>r.getFixedT(t,n,i),_t=(r,t,n,i)=>x.useCallback(Ne(r,t,n,i),[r,t,n,i]),Tt=(r,t={})=>{var C,b,A,W;const{i18n:n}=t,{i18n:i,defaultNS:g}=x.useContext(yt)||{},c=n||i||bt();if(c&&!c.reportNamespaces&&(c.reportNamespaces=new Et),!c){ge(c,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const R=(L,P)=>K(P)?P:ft(P)&&K(P.defaultValue)?P.defaultValue:Array.isArray(L)?L[L.length-1]:L,S=[R,{},!1];return S.t=R,S.i18n={},S.ready=!1,S}(C=c.options.react)!=null&&C.wait&&ge(c,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const T={...mt(),...c.options.react,...t},{useSuspense:s,keyPrefix:d}=T;let h=g||((b=c.options)==null?void 0:b.defaultNS);h=K(h)?[h]:h||["translation"],(W=(A=c.reportNamespaces).addUsedNamespaces)==null||W.call(A,h);const m=(c.isInitialized||c.initializedStoreOnce)&&h.every(R=>lt(R,c,T)),j=_t(c,t.lng||null,T.nsMode==="fallback"?h:h[0],d),N=()=>j,I=()=>Ne(c,t.lng||null,T.nsMode==="fallback"?h:h[0],d),[$,Y]=x.useState(N);let D=h.join();t.lng&&(D=`${t.lng}${D}`);const F=pt(D),_=x.useRef(!0);x.useEffect(()=>{const{bindI18n:R,bindI18nStore:S}=T;_.current=!0,!m&&!s&&(t.lng?Se(c,t.lng,h,()=>{_.current&&Y(I)}):be(c,h,()=>{_.current&&Y(I)})),m&&F&&F!==D&&_.current&&Y(I);const L=()=>{_.current&&Y(I)};return R&&(c==null||c.on(R,L)),S&&(c==null||c.store.on(S,L)),()=>{_.current=!1,c&&R&&(R==null||R.split(" ").forEach(P=>c.off(P,L))),S&&c&&S.split(" ").forEach(P=>c.store.off(P,L))}},[c,D]),x.useEffect(()=>{_.current&&m&&Y(N)},[c,d,m]);const p=[$,c,m];if(p.t=$,p.i18n=c,p.ready=m,m||!m&&!s)return p;throw new Promise(R=>{t.lng?Se(c,t.lng,h,()=>R()):be(c,h,()=>R())})};function Ct({apiBaseUrl:r,useWPHandlers:t,wpConfig:n,enableDefaultStyles:i,assetsBaseUrl:g}){const[c,T]=x.useState([]),[s,d]=x.useState(!0),[h,m]=x.useState({}),[j,N]=x.useState({}),{t:I}=Tt();x.useEffect(()=>{async function p(){try{const b=await(await fetch(`${r}`)).json(),A=nt(b);T(A)}catch(C){console.error("Failed to fetch plugins",C)}finally{d(!1)}}p()},[r,t,n]);const $=async(p,C)=>{var b;m(A=>({...A,[C.slug]:!0}));try{let A=`${r}/${p}/${C.slug}`;const W=`download_url=${encodeURIComponent(C.download||"")}`;t?A=`${n.ajax_url}?action=marketplace_${p}_plugin&_wpnonce=${n.nonce}&nonce=${n.nonce}&slug=${C.slug}&${W}`:A=A+(A.includes("?")?"&":"?")+W;const S=await(await fetch(A,{method:"POST"})).json();S.success?T(L=>L.map(P=>P.slug===C.slug?{...P,installed:S.data.installed,activated:S.data.activated}:P)):alert(((b=S.data)==null?void 0:b.message)||"Failed to perform action")}catch(A){console.error("Plugin action failed",A)}finally{m(A=>({...A,[C.slug]:!1}))}},Y=(p,C)=>{p.stopPropagation(),N(b=>({...b,[C.slug]:!0})),setTimeout(()=>{N(b=>({...b,[C.slug]:!1}))},2e3)};if(s)return y.jsx("p",{children:"Loading plugins..."});const D=new Map,F=new Map;c.forEach(p=>{F.has(p.slug)||F.set(p.slug,p)}),Array.from(F.values()).forEach(p=>{const C=Array.isArray(p.categories)&&p.categories.length?String(p.categories[0]):"Others";D.has(C)||D.set(C,[]),D.get(C).push(p)});const _=Array.from(D.entries());return y.jsx("div",{className:"marketplace-container gv-flex gv-flex-col gv-flex-wrap gv-gap-lg gv-mt-fluid",children:_.map(([p,C])=>y.jsxs("section",{className:"",children:[y.jsx("h2",{className:"gv-heading-md gv-mb-sm",children:p}),y.jsx("div",{className:"gv-grid gv-gap-lg gv-tab-grid-cols-1 gv-desk-grid-cols-2",children:C.map(b=>{var A,W;return y.jsxs("a",{href:"#",className:"gv-shortcut-tile gv-surface-bright",onClick:R=>R.preventDefault(),children:[y.jsx("gv-tile",{"aria-hidden":"true",src:`${g||window.marketplaceConfig&&window.marketplaceConfig.assetsBaseUrl||""}assets/icons/placeholder.svg`}),y.jsxs("div",{className:"gv-content",children:[y.jsx("h3",{className:"gv-title",children:b.name}),y.jsx("p",{children:b.description?b.description:b.shortDescription}),y.jsxs("div",{className:"gv-price",children:[y.jsx("span",{className:"gv-price-prefix",children:I("migratorMail_hi")}),y.jsxs("span",{className:"gv-price-text",children:[b.priceCurrency," ",b.priceAmount]}),y.jsx("span",{className:"gv-period",children:"/mo"})]})]}),y.jsx("gv-icon",{"aria-hidden":"true",src:`${g||window.marketplaceConfig&&window.marketplaceConfig.assetsBaseUrl||""}assets/icons/arrow_forward.svg`}),t?y.jsx(st,{plugin:b,pluginInAction:h,onAction:$}):b.download&&y.jsx("div",{className:"plugin-actions gv-card-content gv-flex gv-gap-sm gv-mt-md",children:y.jsx("a",{href:b.download,download:!0,className:"gv-button gv-button-secondary",onClick:R=>Y(R,b),style:{pointerEvents:j[b.slug]?"none":"auto",opacity:j[b.slug]?.6:1},children:j[b.slug]?((A=marketplaceConfig==null?void 0:marketplaceConfig.labels)==null?void 0:A.downloading)||"Downloading...":((W=marketplaceConfig==null?void 0:marketplaceConfig.labels)==null?void 0:W.download)||"Download"})})]},b.slug)})})]},p))})}return({apiBaseUrl:r,useWPHandlers:t,wpConfig:n,enableDefaultStyles:i,assetsBaseUrl:g})=>y.jsxs("div",{className:"marketplace-container gv-p-lg",children:[y.jsxs("div",{className:"gv-content-container gv-p-lg gv-flex-column-md",style:{background:"#F3F4F0"},children:[y.jsx("h2",{className:"gv-heading-lg",children:"one.com WP marketplace"}),y.jsx("p",{className:"gv-text-sm",children:"Your place to find recommended and relevant plugins for your site."})]}),y.jsx(Ct,{apiBaseUrl:r,useWPHandlers:t,wpConfig:n,enableDefaultStyles:i,assetsBaseUrl:g})]})});
